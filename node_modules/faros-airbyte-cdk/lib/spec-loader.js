"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.SpecLoader = void 0;
const json_schema_ref_parser_1 = __importDefault(require("@apidevtools/json-schema-ref-parser"));
const verror_1 = require("verror");
const protocol_1 = require("./protocol");
// Allows to load specs containing references to spec fragments
class SpecLoader {
    static async loadSpec(specPath) {
        try {
            const dereferenced = (await json_schema_ref_parser_1.default.dereference(specPath));
            return new protocol_1.AirbyteSpec(dereferenced);
        }
        catch (err) {
            throw new verror_1.VError(err, `Failed to load spec references for path ${specPath}`);
        }
    }
}
exports.SpecLoader = SpecLoader;
//# sourceMappingURL=spec-loader.js.map